import os, string
import platform

def writeRescueFile(location):
    f = open(os.path.join(location,"IMPORTANT_NOTE.txt"), "w")
    f.write("Your network has been penetrated.\n")
    f.write("All your files have been encrypted with a strong algorythm.\n")#(misspelled on purpose)
    f.write("Backups were either encrypted or deleted.\n")
    f.write("If you want to recover your files, you need to be a nice boy or girl, and adopt a puppy!\n")
    f.write("Send a picture of your new puppy to this email (thiefCatcher@thieves.onion), and we will callback with the password to unlock your files.")
    f.close()

def getRoot():
    system = platform.system()
    if system == "Linux":
        return ["../experiments/"] 
    elif system == "Windows":
        return ['%s:' % d for d in string.ascii_uppercase if os.path.exists('%s:' % d)]

def deleteFile(file):
    print(f"File {file} removed!")

def encrypt(file):
    print(f"File {file} encrypted!")

for drive in getRoot():
    for path, subdirs, files in os.walk(drive):
        for name in files:
            file = os.path.join(path, name)
            encrypt(file)
            deleteFile(file)
        writeRescueFile(path)